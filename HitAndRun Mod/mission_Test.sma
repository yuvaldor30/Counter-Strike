/* Plugin generated by AMXX-Studio */

#include "amxmodx.inc"
#include "hamsandwich.inc"
#include "missions_api.inc"

#define PLUGIN "Mission #1 - Test"
#define VERSION "1.0"
#define AUTHOR "MJ"

// natives - precache - init - cfg

new g_iMissionID;

public plugin_init() {
	register_plugin(PLUGIN, VERSION, AUTHOR);
	
	RegisterHam(Ham_Killed,"player","fwd_Killed",1);
}

public fwd_LoadMissions()
{
	cmd_CreateMission("Super Killer","Kill your teammates while the round","Kills",mTYPE_EASY, 5);
	cmd_AddMissionLevel(2,150,2500);
	cmd_AddMissionLevel(3,155,25500);
	g_iMissionID = cmd_AddMission();
}

public fwd_Killed(const iKilled, const iKiller)
{
	if(iKiller != iKilled && iKiller && is_user_alive(iKiller) & iKiller <= MaxClients && g_iMissionID == mission_GetUserMissionID(iKiller))
		mission_UpdateUserData(iKiller);
}
